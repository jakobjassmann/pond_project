# Assmann et al. (in prep) - Tundra Ponds
Jakob J. Assmann, Cengiz Akandil1, Elena Plekhanova, Alizée Le Moigne, Sergey V Karsanaev, Trofim C. Maximov, Gabriela Schaepman-Strub

**Code repository accompanying Assmann et al. (in prep)**<br><br>
Last update to readme: 23 October 2024

## Content

This repository contains the scripts and tabular data needed to regenerate the analysis presented in Assmann et al (in prep). <br><br>
*Note: Additional raster data (drone imagery and DSMs) are requried. These are available on the Zenodo, see details below.* 

- [1. Folder structure](#1-folder-structure)
- [2. Required data](#2-required-data)
- [3. Analysis workflow](#3-analysis-workflow)
- [4. Acknowledgements](#4-acknowledgements)
- [5. Citation](#5-citation)
- [6. License](#6-license)

## 1. Folder structure

This code repostiory has the following folder stucture:

```
data/                                   
  |- climate-data/                      - Climate data for supplementary figures and analyses.
  |- drone_data/                        - Placeholder folder for the drone RGB imagery, DSMs and surface water predictions
  |- planet_data/                       - Placeholder folder for the Planet satellite imagery used in Figure 1 for the background. 
  |- pond_polys/                        - Placeholder folder for the pond polygon geometries
  |- training_data/                     - Vector/raster source files for the stratifications tested (BIOWIDE and Derek)
  |- training_polygons/                 - Pixel centre coordinated and extracted predictor values for the model training
  |- web_data/                          - Variogram samples for predictor variables
docs/                                   - HTML and Java-Script code for the Web-GIS
gis/                                    - QGIS projects for annotations and visualisation
scripts/                                
  |- analysis/                          - Scripts to generate the analyses and figures presented in the manuscript and supplementary materials
  |- archived_scripts/                  - Legacy scripts not needed for current version of the analysis
  |- prep/                              - Scripts for data prep
  |- web_gis/                           - Scripts for projecting the models across Denmark
tables/                                 - Tables presented in the manuscript and supplementary materials
```

[\[back to content\]](#content) 

## 2. Required data

To following datasets are not included in this code repository, but are required to regenerate the analysis.  

**Kytalyk drone RGB images and DSM rasters** - Assmann et al. 2024 hosted on Zenodo: :exclamation: Add link! :exclamation: 

[\[back to content\]](#content)

## 3. Analysis workflow
We recommend to run the scripts in the sequence as listed below.

**Data Preparation**
- Download the drone data from the Zenodo repository and extract it into the place holder folders.
- Run all R scripts in the `/scripts/prep` folder, following the numbering in the file names.

**Analyses**
- `scripts/analysis/1_predict_water.R` to generate the water masks.
- `scripts/analysis/2_filter_large_ponds.R` to filter out all ponds > 1m2.
- `scripts/analysis/3_pond_time_series_analysis.R` for the analyses of individual pond change.
- `scripts/analysis/4_climate_analysis.R` for all climate analyses (supplementary materials).
- `scripts/analysis/5_geolcoation.R` for the analysis of geolocation accouracy (supplementary materials).

**Figures / Tables**<br><br>
All figures in the main manuscript are generated using individual scripts named accordingly.<br><br>
The figures and tables presented in the supplementary materials are generated by the analysis scripts (above) or by the scripts for the figures in the main manuscript. Exceptions are indicated below. 
- Figure in main text: run `scripts/figures/X_figure_X.R` - where X is the number of the figure.
- Areal statistics for the AOIs can be generated using 'scripts/figures/aoi_summaries.R'.

**Generate Web-GIS**<br><br>
The Web-GIS can be generated automatically, as long as an AWS account is available. The latter is required for webhosting. Adapt and update the file locations and credentials accordingly. In-text comments in individual scripts and HTML pages provide guidance.  
- Update links and location references in `docs/index.html` and `docs/data_vis.html`.
- Run the scripts in `scripts/web-gis/` following the numbering indicateed in the file names. 

[\[back to content\]](#content)

## 4. Acknowledgements

We would like to thank all drone-pilots and field team members who contributed to the data collection during the field seasons 2014 – 2021, including Inge Grünberg (nee Juszak), Maitane Iturrate-Garcia and Vitalii Zemlianskii. This study was supported by the Swiss National Science Foundation (grant no. 178753) and the University Research Priority Program on Global Change and Biodiversity of the University of Zurich.

[\[back to content\]](#content)

## 5. Citation

Jakob J. Assmann, Cengiz Akandil, Elena Plekhanova, Alizée Le Moigne, Sergey V Karsanaev, Trofim C. Maximov, Gabriela Schaepman-Strub (in prep). Kytalyk Pond Project.
https://github.com/jakobjassmann/pond_project  

[\[back to content\]](#content)

## 6. License

_When using code or other content from this repostiory in scientific work, please use the citation provided above to acknwoledge the authors._ 

- All code (.R, .sh and .HTML files) is licensed under the MIT license (see [license text](https://github.com/jakobjassmann/pond_project/blob/main/LICENSE)).<br>
- All other content of this repository, including: figures, raster, tabular and vector data, is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"> <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a>

[\[back to content\]](#content)
